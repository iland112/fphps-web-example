<html xmlns:th="http://www.thymeleaf.org">
  <body>
    <!-- Legacy device-properties fragment (kept for backwards compatibility) -->
    <div th:fragment="device-properties (properties)">
      <form action="" method="post">
        <div>
          <div id="device-control" class="">
            <div id="read-mode" class="flex flex-row">
              <p>
                <input type="radio" name="read-mode" value="0" id="read-mode-one-step"/>
                <label for="read-mode-one-step">One Step (DETECT+OCR+RF)</label>
              </p>
              <p>
                <input type="radio" name="read-mode" value="1" id="read-mode-two-step"/>
                <label for="read-mode-two-step">Two Step (DETECT => OCR+RF)</label>
              </p>
              <p>
                <input type="radio" name="read-mode" value="2" id="read-mode-three-step"/>
                <label for="read-mode-three-step">Three Step (DETECT => OCR => RF)</label>
              </p>
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- DG Checkbox Group - Modern Card Style -->
    <fieldset th:fragment="dgCheckboxGroup(dgs)" class="bg-gray-50 rounded-xl p-4 border border-gray-100">
      <legend class="text-xs font-semibold text-gray-700 uppercase tracking-wider px-2">Data Groups</legend>
      <div class="grid grid-cols-4 gap-3 mt-3">
        <div th:replace="~{:: modernCheckBox('dg1', ${dgs.dg1}, 'DG01')}"></div>
        <div th:replace="~{:: modernCheckBox('dg2', ${dgs.dg2}, 'DG02')}"></div>
        <div th:replace="~{:: modernCheckBox('dg3', ${dgs.dg3}, 'DG03')}"></div>
        <div th:replace="~{:: modernCheckBox('dg4', ${dgs.dg4}, 'DG04')}"></div>
        <div th:replace="~{:: modernCheckBox('dg5', ${dgs.dg5}, 'DG05')}"></div>
        <div th:replace="~{:: modernCheckBox('dg6', ${dgs.dg6}, 'DG06')}"></div>
        <div th:replace="~{:: modernCheckBox('dg7', ${dgs.dg7}, 'DG07')}"></div>
        <div th:replace="~{:: modernCheckBox('dg8', ${dgs.dg8}, 'DG08')}"></div>
        <div th:replace="~{:: modernCheckBox('dg9', ${dgs.dg9}, 'DG09')}"></div>
        <div th:replace="~{:: modernCheckBox('dg10', ${dgs.dg10}, 'DG10')}"></div>
        <div th:replace="~{:: modernCheckBox('dg11', ${dgs.dg11}, 'DG11')}"></div>
        <div th:replace="~{:: modernCheckBox('dg12', ${dgs.dg12}, 'DG12')}"></div>
        <div th:replace="~{:: modernCheckBox('dg13', ${dgs.dg13}, 'DG13')}"></div>
        <div th:replace="~{:: modernCheckBox('dg14', ${dgs.dg14}, 'DG14')}"></div>
        <div th:replace="~{:: modernCheckBox('dg15', ${dgs.dg15}, 'DG15')}"></div>
        <div th:replace="~{:: modernCheckBox('dg16', ${dgs.dg16}, 'DG16')}"></div>
      </div>
    </fieldset>

    <!-- Authentication Options - Modern Card Style -->
    <fieldset th:fragment="authOptions(auths)" class="bg-gray-50 rounded-xl p-4 border border-gray-100">
      <legend class="text-xs font-semibold text-gray-700 uppercase tracking-wider px-2">Authentication</legend>
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 mt-3">
        <div th:replace="~{:: modernCheckBox('pa', ${auths.pa}, 'PA')}"></div>
        <div th:replace="~{:: modernCheckBox('aa', ${auths.aa}, 'AA')}"></div>
        <div th:replace="~{:: modernCheckBox('ca', ${auths.ca}, 'CA')}"></div>
        <div th:replace="~{:: modernCheckBox('ta', ${auths.ta}, 'TA')}"></div>
        <div th:replace="~{:: modernCheckBox('sac', ${auths.sac}, 'SAC')}"></div>
      </div>
    </fieldset>

    <!-- Batch Mode - Modern Card Style -->
    <fieldset th:fragment="batchMode(lightTypes)" class="bg-gray-50 rounded-xl p-4 border border-gray-100">
      <legend class="text-xs font-semibold text-gray-700 uppercase tracking-wider px-2">Batch Mode</legend>
      <div class="flex flex-wrap gap-3 mt-3">
        <div th:replace="~{:: modernCheckBox('ir', ${lightTypes.ir}, 'IR')}"></div>
        <div th:replace="~{:: modernCheckBox('uv', ${lightTypes.uv}, 'UV')}"></div>
        <div th:replace="~{:: modernCheckBox('wh', ${lightTypes.wh}, 'WH')}"></div>
      </div>
    </fieldset>

    <!-- Anti-Glare - Modern Card Style -->
    <fieldset th:fragment="antiGlare(values)" class="bg-gray-50 rounded-xl p-4 border border-gray-100">
      <legend class="text-xs font-semibold text-gray-700 uppercase tracking-wider px-2">Anti-Glare</legend>
      <div class="flex flex-col gap-3 mt-3">
        <div th:replace="~{:: modernCheckBox('antiGlare', ${values.antiGlare}, 'Anti-Glare')}"></div>
        <div th:replace="~{:: modernCheckBox('antiGlareIR', ${values.antiGlareIR}, 'Anti-Glare IR')}"></div>
        <div th:replace="~{:: modernCheckBox('antiGlareIRHalf', ${values.antiGlareIRHalf}, 'Anti-Glare IR Half')}"></div>
      </div>
    </fieldset>

    <!-- Etc Options - Modern Card Style (NEW) -->
    <fieldset th:fragment="etcOptions(values)" class="bg-gray-50 rounded-xl p-4 border border-gray-100">
      <legend class="text-xs font-semibold text-gray-700 uppercase tracking-wider px-2">Other Options</legend>
      <div class="flex flex-col gap-3 mt-3">
        <div th:replace="~{:: modernCheckBox('crop', ${values.crop}, 'Crop Image')}"></div>
      </div>
    </fieldset>

    <!-- Modern Checkbox Component -->
    <div th:fragment="modernCheckBox(fieldName, value, label)" class="flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all cursor-pointer">
      <input
        type="checkbox"
        class="size-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-offset-0 cursor-pointer"
        th:id="'hs-checkbox-' + ${fieldName}"
        th:name="${fieldName}"
        th:checked="${value}"
      />
      <label
        th:for="'hs-checkbox-' + ${fieldName}"
        class="text-sm font-medium text-gray-700 cursor-pointer select-none"
        th:text="${label}">Label</label>
    </div>

    <!-- Legacy checkBox fragment (kept for backwards compatibility) -->
    <div th:fragment="checkBox(value, label)" class="flex">
      <input
        type="checkbox"
        class="mt-0.5 shrink-0 rounded-sm border-gray-200 text-blue-600 checked:border-blue-500 focus:ring-blue-500 disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-700 dark:bg-neutral-800 dark:checked:border-blue-500 dark:checked:bg-blue-500 dark:focus:ring-offset-gray-800"
        id="hs-checkbox-dg01"
        th:value="${value}?: 'null'"
      />
      <label
        for="hs-checkbox-dg01"
        class="ms-3 text-sm text-gray-500 dark:text-neutral-400"
        th:text="${#strings.toUpperCase(label)}">DG01</label>
    </div>
  </body>
</html>
